{% extends 'admin_dashboard/base.html' %}

{% block title %}Projects - Admin{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h1>Projects</h1>
    <a href="{% url 'admin_dashboard:project_create' %}" class="btn btn-primary">Add New Project</a>
</div>

<div class="card-grid">
    {% for project in projects %}
    <div class="card">
        <div class="card-image">
            {% if project.image %}
            <img src="{{ project.image.url }}" alt="{{ project.title }}">
            {% else %}
            <svg width="60" height="60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            {% endif %}
        </div>
        <div class="card-body">
            <h3>{{ project.title }}</h3>
            <p>{{ project.description|truncatewords:20 }}</p>
            <p style="color: var(--warning); font-size: 0.9rem;">{{ project.technologies }}</p>
        </div>
        <div class="card-footer">
            <a href="{% url 'admin_dashboard:project_edit' project.pk %}" class="btn btn-primary btn-sm">Edit</a>
            <form method="post" action="{% url 'admin_dashboard:project_delete' project.pk %}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this project?');">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
        </div>
    </div>
    {% empty %}
    <div style="grid-column: 1/-1; text-align: center; padding: 3rem;">
        <p style="font-size: 1.2rem; opacity: 0.7;">No projects yet. Create your first project!</p>
        <a href="{% url 'admin_dashboard:project_create' %}" class="btn btn-primary" style="margin-top: 1rem;">Add Project</a>
    </div>
    {% endfor %}
</div>
{% endblock %}
