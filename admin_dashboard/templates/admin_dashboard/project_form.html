{% extends 'admin_dashboard/base.html' %}

{% block title %}{% if project %}Edit{% else %}Create{% endif %} Project - Admin{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h1>{% if project %}Edit{% else %}Create New{% endif %} Project</h1>
</div>

<div class="form-container">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="title">Project Title *</label>
            <input type="text" id="title" name="title" value="{{ project.title }}" required>
        </div>

        <div class="form-group">
            <label for="description">Description *</label>
            <textarea id="description" name="description" required>{{ project.description }}</textarea>
        </div>

        <div class="form-group">
            <label for="technologies">Technologies Used *</label>
            <input type="text" id="technologies" name="technologies" value="{{ project.technologies }}" placeholder="e.g., Django, React, PostgreSQL" required>
        </div>

        <div class="form-group">
            <label for="image">Project Image</label>
            {% if project.image %}
            <div style="margin-bottom: 1rem; padding: 1rem; background: var(--dark); border-radius: 8px; border: 1px solid var(--border);">
                <img src="{{ project.image.url }}" alt="{{ project.title }}" style="max-width: 100%; max-height: 250px; border-radius: 8px; display: block; margin-bottom: 0.5rem; object-fit: cover;">
                <p style="margin-bottom: 0.5rem; color: var(--text-light); font-size: 0.9rem;">{{ project.image.name }}</p>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer; color: var(--danger);">
                    <input type="checkbox" name="remove_image" value="1">
                    <span>Remove this image</span>
                </label>
            </div>
            {% endif %}
            <input type="file" id="image" name="image" accept="image/*">
        </div>

        <div class="form-group">
            <label for="github_url">GitHub URL</label>
            <input type="url" id="github_url" name="github_url" value="{{ project.github_url }}" placeholder="https://github.com/username/repo">
        </div>

        <div class="form-group">
            <label for="live_url">Live Demo URL</label>
            <input type="url" id="live_url" name="live_url" value="{{ project.live_url }}" placeholder="https://example.com">
        </div>

        <div class="form-group">
            <label for="order">Display Order</label>
            <input type="number" id="order" name="order" value="{{ project.order|default:0 }}" min="0">
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">{% if project %}Update{% else %}Create{% endif %} Project</button>
            <a href="{% url 'admin_dashboard:projects_list' %}" class="btn" style="background: var(--border);">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
